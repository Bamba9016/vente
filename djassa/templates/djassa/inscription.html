{% extends 'djassa/djassaman/baselogin.html' %}
{% load widget_tweaks %}
{% load custom_filters %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-body">
                    <h3 class="text-center mb-4">Inscription</h3>
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- Prénom -->
                        <div class="mb-3">
                            <label class="form-label">Prénom</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                                {{ form.first_name|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Nom -->
                        <div class="mb-3">
                            <label class="form-label">Nom</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                                {{ form.last_name|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Nom d'utilisateur -->
                        <div class="mb-3">
                            <label class="form-label">Nom d’utilisateur</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user-circle"></i></span>
                                {{ form.username|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label">Adresse e-mail</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                {{ form.email|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Pays (déplacé en haut) -->
                        <div class="mb-3">
                            <label class="form-label">Pays</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-globe"></i></span>
                                {{ form.country|add_class:"form-select" }}
                            </div>
                        </div>

                        <!-- Ville -->
                        <div class="mb-3">
                            <label class="form-label">Ville</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-city"></i></span>
                                {{ form.city|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Téléphone -->
                        <div class="mb-3">
                            <label class="form-label">Numéro de téléphone</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                {{ form.phone_number|add_class:"form-control" }}
                            </div>
                        </div>


                        <!-- Date de naissance -->
                        <div class="mb-3">
                            <label class="form-label">Date de naissance</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                                {{ form.date_of_birth|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Genre -->
                        <div class="mb-3">
                            <label class="form-label">Genre</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-venus-mars"></i></span>
                                {{ form.gender|add_class:"form-select" }}
                            </div>
                        </div>

                        <!-- Photo de profil -->
                        <div class="mb-3">
                            <label class="form-label">Photo de profil</label>
                            {{ form.profile_picture|add_class:"form-control" }}
                        </div>

                        <!-- Mot de passe -->
                        <div class="mb-3">
                            <label class="form-label">Mot de passe</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                {{ form.mot_de_passe|add_class:"form-control" }}
                            </div>
                        </div>

                        <!-- Confirmation mot de passe -->
                        <div class="mb-3">
                            <label class="form-label">Confirmez le mot de passe</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                {{ form.confirmation_mot_de_passe|add_class:"form-control" }}
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">S'inscrire</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const countryField = document.getElementById("id_country");
    const phoneField = document.getElementById("id_phone_number");

    const countryCodes = {
        "FR": "+33",
        "CI": "+225",
        "SN": "+221",
        "CM": "+237",
        "US": "+1",
        "GB": "+44",
        "NG": "+234"
        // Ajoute d'autres si nécessaire
    };

    countryField?.addEventListener("change", () => {
        const selectedCountry = countryField.value;
        const code = countryCodes[selectedCountry];
        if (code && phoneField.value === "") {
            phoneField.value = code + " ";
        }
    });
</script>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

